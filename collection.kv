
#: import Deck Deck.Deck

#:include tutorialscreen.kv
#:include gameplayscreen.kv
#:include endgamescreen.kv

# All classes related to the intro screen

<PlayerSection@Button>:
    value: 0
    size_hint: (None, None)
    size: 200,100
    font_size: '30sp'
    size_hint_y: None
    height: self.texture_size[1] + dp(10)
    text: str(self.value) + ' Players' if self.value > 1 else '1 Player'
    
<PlayerNamePopup>:
    size_hint: .5, .5
    title: 'Enter Name of Player(s)'
    title_size: '20sp'
    separator_height: 5
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 0.8
        size_hint_x: 0.5
        spacing: '20dp'

<CollectionTitle@Label>:
    size_hint: (None, None)
    text: 'Collection'
    markup: True
    size: 100,100
    font_size: '40sp'
    size_hint_y: None
    height: self.texture_size[1] + dp(10) 

<GameLayout>:
    ScreenManager:
        id: screenManager
        Screen:
            id: frontpage
            name: 'screen1'
            RelativeLayout:
                CollectionTitle:
                    pos: (root.width-100)/2, root.height-100              
                GridLayout:
                    cols: 2
                    col_force_default: True
                    row_default_height: root.width/6
                    col_default_width: root.width/3
                    spacing: 30
                    pos_hint: {'center_x':.5, 'center_y':.5}
                    size_hint: (None, None)
                    size: self.minimum_size
                    top: self.height
                    PlayerSection:
                        value: 1
                        on_press:
                            root.set_players(1)
                            screenManager.current = 'screen2'

                    PlayerSection:
                        value: 2
                        on_press:
                            root.set_players(2)
                            root.player_name_popup(2)

                    PlayerSection:
                        value: 3
                        on_press:
                            root.set_players(3)
                            root.player_name_popup(3)

                    PlayerSection:
                        value: 4
                        on_press:
                            root.set_players(4)
                            root.player_name_popup(4)  

                Button:
                    text: 'Settings'
                    size: '100sp', '100sp'
                    y: 0
                    x: 0
                    size_hint: (None, None)
                    on_press: app.open_settings()

        GamePlayScreen:
            numberofsets: Deck.numberOfSets(root.cards)
            score_display: root.score_display
            goToIntro: root.goToIntro
            aiScore: "AI: " + str(root.aiScore) if root.aiActivated else ""
            stopClocks: root.stopClocks
            number_of_players: root.number_of_players
            name_of_players: root.name_of_players
            scores_of_players: root.scores_of_players
            screenManager: root.children[0]
            checkIfSetOnBoard: root.checkIfSetOnBoard

        EndGameScreen:
            id: gameoverpage
            name: 'screen3'
            name_of_players: root.name_of_players
            scores_of_players: root.scores_of_players
            screenManager: root.children[0]
            number_of_players: root.number_of_players

        Screen:
            name: 'tutorialFlow'
            TutorialScreen:
                goToIntro: root.goToIntro
                active: root.active
                goToGameScreen: root.goToGameScreen



